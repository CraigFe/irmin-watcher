description = "Irmin watchers"
version = "%%VERSION%%"
requires = "lwt fmt logs %%REQUIRES%%"
archive(byte) = "irmin-watcher.cma"
archive(native) = "irmin-watcher.cmxa"
plugin(byte) = "irmin-watcher.cma"
plugin(native) = "irmin-watcher.cmxs"

package "fsevents" (
  description = "FSevents backend for Irmin watchers"
  version = "%%VERSION%%"
  requires = "osx-fsevents.lwt"
  archive(byte) = "irmin-watcher-fsevents.cma"
  archive(native) = "irmin-watcher-fsevents.cmxa"
  plugin(byte) = "irmin-watcher-fsevents.cma"
  plugin(native) = "irmin-watcher-fsevents.cmxs"
  exists_if = "irmin-watcher-fsevents.cma"
)

package "inotify" (
  description = "Inotify backend for Irmin watchers"
  version = "%%VERSION%%"
  requires = "inotify.lwt"
  archive(byte) = "irmin-watcher-inotify.cma"
  archive(native) = "irmin-watcher-inotify.cmxa"
  plugin(byte) = "irmin-watcher-inotify.cma"
  plugin(native) = "irmin-watcher-inotify.cmxs"
  exists_if = "irmin-watcher-inotify.cma"
)
